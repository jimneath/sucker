<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>README.markdown</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
    <script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            README.markdown
        </h1>
        <ul class="files">
            <li>README.markdown</li>
            <li>Last modified: Fri Oct 22 12:10:34 +0100 2010</li>
        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <h1>Sucker</h1>

<p>Sucker is a Ruby wrapper to the <a href="https://affiliate-program.amazon.co.uk/gp/advertising/api/detail/main.html">Amazon Product Advertising API</a>. It runs on <a href="http://github.com/taf2/curb">curb</a> and the Nokogiri implementation of the XML Mini module in Active Support. It is blazing fast and supports <strong>the entire API</strong>.</p>

<p><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/f/f8/FEMA_-_32011_-_FEMA_Joint_Field_Office_%28JFO%29_preparation_in_Ohio.jpg/480px-FEMA_-_32011_-_FEMA_Joint_Field_Office_%28JFO%29_preparation_in_Ohio.jpg" alt="Sucker" /></p>

<h2>Examples</h2>

<p>Set up a worker.</p>

<pre><code>worker = Sucker.new(
  :locale         =&gt; "us",
  :key            =&gt; "API KEY",
  :secret         =&gt; "API SECRET")
</code></pre>

<p>Prep a request.</p>

<pre><code>asin_batch = %w{
  0816614024 0143105825 0485113600 0816616779 0942299078
  0816614008 144006654X 0486400360 0486417670 087220474X }
worker &lt;&lt; {
  "Operation"     =&gt; "ItemLookup",
  "IdType"        =&gt; "ASIN",
  "ItemId"        =&gt; asin_batch,
  "ResponseGroup" =&gt; ["ItemAttributes", "OfferFull"] }
</code></pre>

<p>Perform the request.</p>

<pre><code>response = worker.get
</code></pre>

<p>Debug.</p>

<pre><code>if response.valid?
  p response.code,
    response.time,
    response.body,
    response.xml,
    response.to_hash
end
</code></pre>

<p>You performed an item lookup. Iterate over all items and errors.</p>

<pre><code>response.node("Item").each { |item| ... }
response.node("Error").each { |error| ... }
</code></pre>

<p>Perform a new request in a more DSL-y way.</p>

<pre><code>worker &lt;&lt; { "ItemId"  =&gt; "0486454398" }
worker.get.node("Item").each { |item| ... }
</code></pre>

<p>Repeat ad infinitum.</p>

<p>Check the <a href="http://github.com/papercavalier/sucker/tree/master/spec/integration/">integration specs</a> for more examples. In particular, see <a href="http://github.com/papercavalier/sucker/tree/master/spec/integration/twenty_items_spec.rb">twenty items</a> and <a href="http://github.com/papercavalier/sucker/tree/master/spec/integration/multiple_locales_spec.rb">multiple locales</a> for advanced usage.</p>

<p>Finally, dive into the <a href="https://affiliate-program.amazon.co.uk/gp/advertising/api/detail/main.html">API docs</a> to construct your own queries.</p>

<h2>Stubbing</h2>

<p>Use <a href="http://github.com/myronmarston/vcr">VCR</a> to stub your requests. <a href="http://github.com/papercavalier/sucker/blob/master/spec/support/vcr.rb">This file</a> should help you set up VCR with RSpec.</p>

<p>Don't match requests on URI. The parameters include a timestamp that results in each URI being unique.</p>

<h2>Compatibility</h2>

<p>Specs pass against Ruby 1.8.7, Ruby 1.9.2, and Rubinius 1.1.</p>
<script type="text/javascript">$(function() {
  $('a').each(function() { $(this).attr('target', '_blank') })
})</script>

    </div>
    

    

    
    

    
    

    

    

    

    

    

    
</div>
    </div>
  </body>
</html>